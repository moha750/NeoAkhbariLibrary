<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููุชุจุฉ ุงูุฑูููุฉ - ููุชุจุชู ุงูุฅููุชุฑูููุฉ ุงูุดุงููุฉ</title>
    <meta name="description" content="ููุชุจุฉ ุฑูููุฉ ุดุงููุฉ ุชุญุชูู ุนูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงููุชุจ ูู ูุฎุชูู ุงููุฌุงูุงุช">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">

        <!-- Header Image -->
        <img src="tape.png" alt="ุดุนุงุฑ ุงูููุชุจุฉ ุงูุฑูููุฉ" class="header-image">

        <input type="text" class="search-input" id="searchInput" placeholder="๐ ุงุจุญุซ ุนู ูุชุงุจ...">

        <div id="categoriesContainer">
            <!-- ุณูุชู ุนุฑุถ ุงูุฃูุณุงู ูุงููุชุจ ููุง ุฏููุงููููุงู -->
        </div>

        <!-- ููุฑู ุชูุงุตู ูุนูุง -->
        <div class="contact-section">
            <h2 class="contact-title">๐ง ูุณุนุฏูุง ุชูุงุตููู ูุนูุง</h2>
            <p class="contact-subtitle">ูุณุนุฏ ุจุชูุงุตูู ูุนูุงุ ุฃุฑุณู ููุง ุฑุณุงูุชู ูุณูุฑุฏ ุนููู ูู ุฃูุฑุจ ููุช</p>
            
            <form id="contactForm" class="contact-form">
                <div class="form-row">
                    <div class="form-group-contact">
                        <label for="contactName">๐ค ุงูุงุณู</label>
                        <input type="text" id="contactName" placeholder="ุฃุฏุฎู ุงุณูู" required>
                    </div>
                    <div class="form-group-contact">
                        <label for="contactEmail">๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                        <input type="email" id="contactEmail" placeholder="example@email.com" required>
                    </div>
                </div>
                
                <div class="form-group-contact">
                    <label for="contactSubject">๐ ุงูููุถูุน</label>
                    <input type="text" id="contactSubject" placeholder="ููุถูุน ุงูุฑุณุงูุฉ" required>
                </div>
                
                <div class="form-group-contact">
                    <label for="contactMessage">๐ฌ ุงูุฑุณุงูุฉ</label>
                    <textarea id="contactMessage" rows="5" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." required></textarea>
                </div>
                
                <button type="submit" class="contact-submit-btn">๐ค ุฅุฑุณุงู ุงูุฑุณุงูุฉ</button>
            </form>
            
            <div id="contactSuccessMessage" class="contact-success" style="display: none;">
                โ ุชู ุฅุฑุณุงู ุฑุณุงูุชู ุจูุฌุงุญ! ุณูุชูุงุตู ูุนู ูุฑูุจุงู.
            </div>
        </div>
    </div>

    <footer>
        <p> ุฌููุน ุงูุญููู ูุญููุธุฉ ููุฅุฎุจุงุฑูุฉ ุงูุฌูุฏุฏ <span id="currentYear"></span> ยฉ </p>
    </footer>

    <script>
        // ุชุญุฏูุซ ุงูุณูุฉ ุชููุงุฆูุงู
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>
    <script>
        // ุชุญููู ุงูุจูุงูุงุช
        function loadData() {
            const categories = JSON.parse(localStorage.getItem('categories') || '[]');
            const books = JSON.parse(localStorage.getItem('books') || '[]');
            const publishedBooks = books.filter(book => book.published === true);
            
            displayBooksByCategory(categories, publishedBooks);
        }

        // ุนุฑุถ ุงููุชุจ ุญุณุจ ุงูุฃูุณุงู
        function displayBooksByCategory(categories, books) {
            const container = document.getElementById('categoriesContainer');
            
            if (books.length === 0) {
                container.innerHTML = `
                    <div class="no-books">
                        <div class="no-books-icon">๐</div>
                        <h2>ูุง ุชูุฌุฏ ูุชุจ ุญุงููุงู</h2>
                        <p>ุงุจุฏุฃ ุจุฅุถุงูุฉ ูุชุจ ุฌุฏูุฏุฉ ูู ููุญุฉ ุงูุชุญูู</p>
                    </div>
                `;
                return;
            }

            // ุฅุฐุง ูู ุชูู ููุงู ุฃูุณุงูุ ุนุฑุถ ุฌููุน ุงููุชุจ
            if (categories.length === 0) {
                container.innerHTML = `
                    <div class="category-section">
                        <div class="books-grid">
                            ${books.map(book => createBookCard(book)).join('')}
                        </div>
                    </div>
                `;
                return;
            }

            // ุนุฑุถ ุงููุชุจ ุญุณุจ ุงูุฃูุณุงู
            let html = '';
            
            categories.forEach(category => {
                const categoryBooks = books.filter(book => book.categoryId === category.id);
                
                if (categoryBooks.length > 0) {
                    html += `
                        <div class="category-section">
                            <div class="category-header">
                                <div class="category-icon">๐</div>
                                <div class="category-info">
                                    <div class="category-name">${category.name}</div>
                                    ${category.description ? `<div class="category-description">${category.description}</div>` : ''}
                                </div>
                                <div class="category-count">${categoryBooks.length} ูุชุงุจ</div>
                            </div>
                            <div class="books-grid">
                                ${categoryBooks.map(book => createBookCard(book)).join('')}
                            </div>
                        </div>
                    `;
                }
            });

            // ูุง ูุนุฑุถ ุงููุชุจ ุจุฏูู ูุณู
            container.innerHTML = html || '<div class="no-books"><div class="no-books-icon">๐</div><h2>ูุง ุชูุฌุฏ ูุชุจ ุญุงููุงู</h2><p>ุงุจุฏุฃ ุจุฅุถุงูุฉ ูุชุจ ุฌุฏูุฏุฉ ูู ููุญุฉ ุงูุชุญูู</p></div>';
        }

        // ุฅูุดุงุก ุจุทุงูุฉ ูุชุงุจ
        function createBookCard(book) {
            const coverHTML = book.coverImage 
                ? `<img src="${book.coverImage}" alt="${book.title}" class="book-cover-image">`
                : `<div class="book-icon">๐</div>`;
            
            return `
                <div class="book-card" onclick="openBook('${book.id}')">
                    ${coverHTML}
                    <div class="book-title">${book.title}</div>
                    <div class="book-author">โ๏ธ ${book.author}</div>
                    <div class="book-description">${book.description}</div>
                    <div class="book-date">๐ ${book.date}</div>
                    <a href="read.html?id=${book.id}" class="read-btn" onclick="event.stopPropagation()">ูุฑุงุกุฉ ุงููุชุงุจ</a>
                </div>
            `;
        }

        // ูุชุญ ุงููุชุงุจ
        function openBook(id) {
            window.location.href = `read.html?id=${id}`;
        }

        // ุงูุจุญุซ ุนู ุงููุชุจ
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            
            if (!searchTerm) {
                loadData();
                return;
            }

            const books = JSON.parse(localStorage.getItem('books') || '[]');
            const publishedBooks = books.filter(book => book.published === true);
            
            const filteredBooks = publishedBooks.filter(book => 
                book.title.toLowerCase().includes(searchTerm) ||
                book.author.toLowerCase().includes(searchTerm) ||
                book.description.toLowerCase().includes(searchTerm)
            );
            
            // ุนุฑุถ ูุชุงุฆุฌ ุงูุจุญุซ ุจุฏูู ุชุตููู
            const container = document.getElementById('categoriesContainer');
            if (filteredBooks.length === 0) {
                container.innerHTML = `
                    <div class="no-books">
                        <div class="no-books-icon">๐</div>
                        <h2>ูุง ุชูุฌุฏ ูุชุงุฆุฌ</h2>
                        <p>ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุจ ุชุทุงุจู ุจุญุซู</p>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="category-section">
                        <div class="category-header">
                            <div class="category-icon">๐</div>
                            <div class="category-info">
                                <div class="category-name">ูุชุงุฆุฌ ุงูุจุญุซ</div>
                                <div class="category-description">ุนู "${searchTerm}"</div>
                            </div>
                            <div class="category-count">${filteredBooks.length} ูุชุงุจ</div>
                        </div>
                        <div class="books-grid">
                            ${filteredBooks.map(book => createBookCard(book)).join('')}
                        </div>
                    </div>
                `;
            }
        });

        // ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ูุชุญ ุงูุตูุญุฉ
        loadData();

        // ูุนุงูุฌุฉ ููุฑู ุงูุชูุงุตู
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const subject = document.getElementById('contactSubject').value.trim();
            const message = document.getElementById('contactMessage').value.trim();
            
            if (!name || !email || !subject || !message) {
                alert('โ๏ธ ุงูุฑุฌุงุก ููุก ุฌููุน ุงูุญููู');
                return;
            }
            
            // ุญูุธ ุงูุฑุณุงูุฉ ูู localStorage
            const messages = JSON.parse(localStorage.getItem('contactMessages') || '[]');
            const newMessage = {
                id: Date.now().toString(),
                name,
                email,
                subject,
                message,
                date: new Date().toLocaleDateString('ar-EG'),
                time: new Date().toLocaleTimeString('ar-EG'),
                read: false
            };
            
            messages.unshift(newMessage);
            localStorage.setItem('contactMessages', JSON.stringify(messages));
            
            // ุฅุธูุงุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
            document.getElementById('contactSuccessMessage').style.display = 'block';
            document.getElementById('contactForm').reset();
            
            // ุฅุฎูุงุก ุฑุณุงูุฉ ุงููุฌุงุญ ุจุนุฏ 5 ุซูุงูู
            setTimeout(() => {
                document.getElementById('contactSuccessMessage').style.display = 'none';
            }, 5000);
        });
    </script>
</body>
</html>

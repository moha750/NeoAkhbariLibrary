# ุฏููู ุฅุนุฏุงุฏ Supabase ููููุชุจุฉ ุงูุฑูููุฉ

ูุฐุง ุงูุฏููู ูุดุฑุญ ููููุฉ ุฑุจุท ุงูููุชุจุฉ ุงูุฑูููุฉ ุจูุงุนุฏุฉ ุจูุงูุงุช Supabase ุฎุทูุฉ ุจุฎุทูุฉ.

## ๐ ุงููุชุทูุจุงุช

1. ุญุณุงุจ ุนูู [Supabase](https://supabase.com) (ูุฌุงูู)
2. ูุชุตูุญ ููุจ ุญุฏูุซ
3. ุงููููุงุช ุงููุฑููุฉ ูู ูุฐุง ุงููุดุฑูุน

---

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ูุดุฑูุน Supabase

1. ุงุฐูุจ ุฅูู [https://supabase.com](https://supabase.com)
2. ูู ุจุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ ุฃู ุชุณุฌูู ุงูุฏุฎูู
3. ุงุถุบุท ุนูู "New Project"
4. ุงููุฃ ุงูุจูุงูุงุช ุงูุชุงููุฉ:
   - **Name**: ุงูููุชุจุฉ ุงูุฑูููุฉ (ุฃู ุฃู ุงุณู ุชุฑูุฏู)
   - **Database Password**: ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ ูุงุญูุธูุง
   - **Region**: ุงุฎุชุฑ ุฃูุฑุจ ููุทูุฉ ูู
5. ุงุถุบุท ุนูู "Create new project"
6. ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ุงููุดุฑูุน (ูุฏ ูุณุชุบุฑู ุฏูููุฉ ุฃู ุฏูููุชูู)

---

### ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ูู ููุญุฉ ุชุญูู Supabaseุ ุงุฐูุจ ุฅูู **SQL Editor** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ุงูุชุญ ููู `database-setup.sql` ูู ูุฌูุฏ ุงููุดุฑูุน
3. ุงูุณุฎ **ุฌููุน** ูุญุชููุงุช ุงูููู
4. ุงูุตููุง ูู SQL Editor ูู Supabase
5. ุงุถุบุท ุนูู ุฒุฑ **"Run"** ุฃู ุงุถุบุท `Ctrl + Enter`
6. ุงูุชุธุฑ ุญุชู ูุธูุฑ "Success. No rows returned"

โ ุงูุขู ุชู ุฅูุดุงุก ุฌููุน ุงูุฌุฏุงูู ูุงูููุงุฑุณ ูุงูุณูุงุณุงุช!

---

### ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏ Storage ููุตูุฑ (ุงุฎุชูุงุฑู)

ุฅุฐุง ููุช ุชุฑูุฏ ุฑูุน ุตูุฑ ุฃุบููุฉ ุงููุชุจ:

1. ุงุฐูุจ ุฅูู **Storage** ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ุงุถุบุท ุนูู "Create a new bucket"
3. ุงููุฃ ุงูุจูุงูุงุช:
   - **Name**: `book-covers`
   - **Public bucket**: โ ูุนูู ูุฐุง ุงูุฎูุงุฑ
4. ุงุถุบุท ุนูู "Create bucket"

---

### ุงูุฎุทูุฉ 4: ุงูุญุตูู ุนูู ููุงุชูุญ API

1. ุงุฐูุจ ุฅูู **Settings** (ุงูุฅุนุฏุงุฏุงุช) ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
2. ุงุถุบุท ุนูู **API** ูู ุงููุงุฆูุฉ ุงููุฑุนูุฉ
3. ุณุชุฌุฏ:
   - **Project URL**: ุงูุณุฎู (ูุซุงู: `https://xxxxx.supabase.co`)
   - **anon public key**: ุงูุณุฎู (ุณูุณูุฉ ุทูููุฉ ูู ุงูุฃุญุฑู)

---

### ุงูุฎุทูุฉ 5: ุชูููู ุงููุดุฑูุน

1. ุงูุชุญ ููู `supabase-config.js`
2. ุงุณุชุจุฏู ุงูููู ุงูุชุงููุฉ:

```javascript
const SUPABASE_CONFIG = {
    url: 'YOUR_SUPABASE_URL', // ุถุน Project URL ููุง
    anonKey: 'YOUR_SUPABASE_ANON_KEY', // ุถุน anon public key ููุง
    // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
};
```

**ูุซุงู:**
```javascript
const SUPABASE_CONFIG = {
    url: 'https://abcdefghijk.supabase.co',
    anonKey: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
    tables: {
        categories: 'categories',
        books: 'books',
        pages: 'pages',
        contact_messages: 'contact_messages'
    }
};
```

---

### ุงูุฎุทูุฉ 6: ุฅุถุงูุฉ ุงูุณูุฑูุจุชุงุช ุฅูู HTML

ุฃุถู ุงูุณุทูุฑ ุงูุชุงููุฉ ูู `<head>` ููู ููู HTML:

```html
<!-- Supabase JS Client -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- ูููุงุช ุงูุชูููู ูุงูู API -->
<script src="supabase-config.js"></script>
<script src="supabase-api.js"></script>
```

**ุงููููุงุช ุงูุชู ุชุญุชุงุฌ ุงูุชุญุฏูุซ:**
- โ `index.html`
- โ `category.html`
- โ `read.html`
- โ `admin.html` (ุฅุฐุง ููุช ุชุณุชุฎุฏู ููุญุฉ ุชุญูู)

---

### ุงูุฎุทูุฉ 7: ุชููุฆุฉ API ูู JavaScript

ูู ุจุฏุงูุฉ ูู ููู JavaScriptุ ุฃุถู:

```javascript
// ุชููุฆุฉ ุงูุงุชุตุงู ุจู Supabase
window.addEventListener('load', async function() {
    try {
        await api.init();
        // ุจุงูู ุงูููุฏ ููุง
    } catch (error) {
        console.error('ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช:', error);
    }
});
```

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ุฌูุจ ุฌููุน ุงูุฃูุณุงู

```javascript
async function loadCategories() {
    const categories = await api.getCategories();
    console.log('ุงูุฃูุณุงู:', categories);
}
```

### ุฌูุจ ุงููุชุจ ุงูููุดูุฑุฉ

```javascript
async function loadBooks() {
    const books = await api.getPublishedBooks();
    console.log('ุงููุชุจ:', books);
}
```

### ุฅุถุงูุฉ ุฑุณุงูุฉ ุชูุงุตู

```javascript
async function sendContactMessage() {
    const messageData = {
        name: 'ุฃุญูุฏ ูุญูุฏ',
        email: 'ahmad@example.com',
        subject: 'ุงุณุชูุณุงุฑ',
        message: 'ูุฑุญุจุงูุ ูุฏู ุณุคุงู...'
    };
    
    try {
        await api.addContactMessage(messageData);
        alert('ุชู ุฅุฑุณุงู ุงูุฑุณุงูุฉ ุจูุฌุงุญ!');
    } catch (error) {
        alert('ุญุฏุซ ุฎุทุฃ ูู ุฅุฑุณุงู ุงูุฑุณุงูุฉ');
    }
}
```

### ุงูุจุญุซ ูู ุงููุชุจ

```javascript
async function searchBooks(searchTerm) {
    const results = await api.searchBooks(searchTerm);
    console.log('ูุชุงุฆุฌ ุงูุจุญุซ:', results);
}
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### Row Level Security (RLS)

ุชู ุชูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู ูุน ุงูุณูุงุณุงุช ุงูุชุงููุฉ:

- โ **ุงููุฑุงุกุฉ ุงูุนุงูุฉ**: ูููู ูุฃู ุดุฎุต ูุฑุงุกุฉ ุงูุฃูุณุงู ูุงููุชุจ ุงูููุดูุฑุฉ
- โ **ุงููุชุงุจุฉ ุงููุญููุฉ**: ููุท ุงููุณุชุฎุฏููู ุงููุตุฑุญ ููู ูููููู ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู/ุงูุญุฐู
- โ **ุฑุณุงุฆู ุงูุชูุงุตู**: ูููู ูุฃู ุดุฎุต ุฅุฑุณุงู ุฑุณุงูุฉ

### ุฅุถุงูุฉ ููุญุฉ ุชุญูู ุขููุฉ (ุงุฎุชูุงุฑู)

ุฅุฐุง ููุช ุชุฑูุฏ ุฅุถุงูุฉ ููุญุฉ ุชุญูู:

1. ุงุฐูุจ ุฅูู **Authentication** ูู Supabase
2. ูุนูู Email Authentication
3. ุฃุถู ูุณุชุฎุฏู ุฅุฏุงุฑู ูู **Users** > **Add user**
4. ุงุณุชุฎุฏู `supabase.auth.signIn()` ูู ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

---

## ๐จ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `categories` (ุงูุฃูุณุงู)
- `id` - UUID (ุงููุนุฑู ุงููุฑูุฏ)
- `name` - TEXT (ุงุณู ุงููุณู)
- `description` - TEXT (ูุตู ุงููุณู)
- `created_at` - TIMESTAMP (ุชุงุฑูุฎ ุงูุฅูุดุงุก)
- `updated_at` - TIMESTAMP (ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ)

### ุฌุฏูู `books` (ุงููุชุจ)
- `id` - UUID (ุงููุนุฑู ุงููุฑูุฏ)
- `title` - TEXT (ุนููุงู ุงููุชุงุจ)
- `category_id` - UUID (ูุนุฑู ุงููุณู)
- `cover_image` - TEXT (ุฑุงุจุท ุตูุฑุฉ ุงูุบูุงู)
- `published` - BOOLEAN (ุญุงูุฉ ุงููุดุฑ)
- `views` - INTEGER (ุนุฏุฏ ุงููุดุงูุฏุงุช)
- `created_at` - TIMESTAMP (ุชุงุฑูุฎ ุงูุฅูุดุงุก)
- `updated_at` - TIMESTAMP (ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ)

### ุฌุฏูู `pages` (ุงูุตูุญุงุช)
- `id` - UUID (ุงููุนุฑู ุงููุฑูุฏ)
- `book_id` - UUID (ูุนุฑู ุงููุชุงุจ)
- `page_number` - INTEGER (ุฑูู ุงูุตูุญุฉ)
- `content` - TEXT (ูุญุชูู ุงูุตูุญุฉ)
- `created_at` - TIMESTAMP (ุชุงุฑูุฎ ุงูุฅูุดุงุก)
- `updated_at` - TIMESTAMP (ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ)

### ุฌุฏูู `contact_messages` (ุฑุณุงุฆู ุงูุชูุงุตู)
- `id` - UUID (ุงููุนุฑู ุงููุฑูุฏ)
- `name` - TEXT (ุงุณู ุงููุฑุณู)
- `email` - TEXT (ุงูุจุฑูุฏ ุงูุฅููุชุฑููู)
- `subject` - TEXT (ุงูููุถูุน)
- `message` - TEXT (ุงูุฑุณุงูุฉ)
- `read` - BOOLEAN (ุญุงูุฉ ุงููุฑุงุกุฉ)
- `created_at` - TIMESTAMP (ุชุงุฑูุฎ ุงูุฅุฑุณุงู)

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ: "Failed to fetch"
**ุงูุญู**: ุชุฃูุฏ ูู ุฃู Project URL ู API Key ุตุญูุญุงู ูู `supabase-config.js`

### ุงููุดููุฉ: "Row Level Security policy violation"
**ุงูุญู**: ุชุฃูุฏ ูู ุชูููุฐ ุฌููุน ุฃูุงูุฑ SQL ูู `database-setup.sql`

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุจูุงูุงุช
**ุงูุญู**: 
1. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
2. ุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุงุณุชุฏุนุงุก `await api.init()` ูุจู ุฃู ุนูููุฉ

### ุงููุดููุฉ: ูุง ูููู ุฑูุน ุงูุตูุฑ
**ุงูุญู**: ุชุฃูุฏ ูู ุฅูุดุงุก bucket ุจุงุณู `book-covers` ูุชูุนูู Public access

---

## ๐ ููุงุฑุฏ ุฅุถุงููุฉ

- [ุชูุซูู Supabase ุงูุฑุณูู](https://supabase.com/docs)
- [JavaScript Client Library](https://supabase.com/docs/reference/javascript)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)

---

## ๐ก ูุตุงุฆุญ ูููุฉ

1. **ูุง ุชุดุงุฑู API Keys**: ุงุญุชูุธ ุจูุง ุณุฑูุฉ ููุง ุชุฑูุนูุง ุนูู GitHub
2. **ุงุณุชุฎุฏู Environment Variables**: ูู ุงูุฅูุชุงุฌุ ุงุณุชุฎุฏู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: Supabase ูููู ุจูุณุฎ ุงุญุชูุงุทู ุชููุงุฆูุ ููู ููููู ุนูู ูุณุฎุฉ ูุฏููุฉ
4. **ุงููุฑุงูุจุฉ**: ุฑุงูุจ ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููุญุฉ ุงูุชุญูู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ุฅูุดุงุก ูุดุฑูุน Supabase
- [ ] ุชูููุฐ `database-setup.sql`
- [ ] ุฅูุดุงุก Storage bucket ููุตูุฑ (ุงุฎุชูุงุฑู)
- [ ] ูุณุฎ Project URL ู API Key
- [ ] ุชุญุฏูุซ `supabase-config.js`
- [ ] ุฅุถุงูุฉ ุงูุณูุฑูุจุชุงุช ุฅูู HTML
- [ ] ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- [ ] ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ

---

**ุชู! ๐ ุงูุขู ุงูููุชุจุฉ ุงูุฑูููุฉ ูุชุตูุฉ ุจู Supabase**

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉุ ุฑุงุฌุน ูุณู "ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ" ุฃู ุงูุชุญ Console ูู ุงููุชุตูุญ ููุชุญูู ูู ุงูุฃุฎุทุงุก.

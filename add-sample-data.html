<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #764ba2;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .log {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 5px;
        }

        .success {
            color: #00ff00;
        }

        .error {
            color: #ff0000;
        }

        .info {
            color: #00bfff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-database"></i> ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ</h1>

        <button class="btn" id="addBtn" onclick="addSampleData()">
            <i class="fas fa-plus"></i> ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ
        </button>

        <button class="btn" onclick="location.href='index.html'" style="background: #6c757d;">
            <i class="fas fa-home"></i> ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
        </button>

        <div class="log" id="log"></div>
    </div>

    <script src="supabase-config.js"></script>
    <script src="supabase-api.js"></script>
    
    <script>
        function addLog(message, type = 'info') {
            const log = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        async function addSampleData() {
            const btn = document.getElementById('addBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุฅุถุงูุฉ...';

            try {
                // ุชููุฆุฉ ุงูุงุชุตุงู
                addLog('ุฌุงุฑู ุงูุงุชุตุงู ุจู Supabase...', 'info');
                await api.init();
                addLog('โ ุชู ุงูุงุชุตุงู ุจูุฌุงุญ', 'success');

                // ุฅุถุงูุฉ ูุณู
                addLog('ุฌุงุฑู ุฅุถุงูุฉ ูุณู...', 'info');
                const category = await api.addCategory(
                    'ุงููุชุจ ุงูุฅุณูุงููุฉ',
                    'ูุชุจ ูู ุงูุนููู ุงูุดุฑุนูุฉ ูุงูุฏุฑุงุณุงุช ุงูุฅุณูุงููุฉ'
                );
                addLog(`โ ุชู ุฅุถุงูุฉ ุงููุณู: ${category.name} (ID: ${category.id})`, 'success');

                // ุฅุถุงูุฉ ูุชุงุจ
                addLog('ุฌุงุฑู ุฅุถุงูุฉ ูุชุงุจ...', 'info');
                const book = await api.addBook({
                    title: 'ุงููุงูู ุงูุดุฑูู ููููููู',
                    category_id: category.id,
                    published: true,
                    views: 0
                });
                addLog(`โ ุชู ุฅุถุงูุฉ ุงููุชุงุจ: ${book.title} (ID: ${book.id})`, 'success');

                // ุฅุถุงูุฉ ุตูุญุงุช
                addLog('ุฌุงุฑู ุฅุถุงูุฉ ุตูุญุงุช...', 'info');
                
                const pages = [
                    {
                        number: 1,
                        content: `<h2>ููุฏูุฉ ุงููุชุงุจ</h2>
                        <p>ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู</p>
                        <p>ุงูุญูุฏ ููู ุฑุจ ุงูุนุงููููุ ูุงูุตูุงุฉ ูุงูุณูุงู ุนูู ุฃุดุฑู ุงูุฃูุจูุงุก ูุงููุฑุณูููุ ูุญูุฏ ูุขูู ุงูุทุงูุฑูู.</p>
                        <p>ูุฐุง ูุชุงุจ ุงููุงูู ูู ุนูู ุงูุฏููุ ุฌูุนู ุงูุดูุฎ ุงูุฌููู ุฃุจู ุฌุนูุฑ ูุญูุฏ ุจู ูุนููุจ ุงูููููู ุฑุญูู ุงููู.</p>`
                    },
                    {
                        number: 2,
                        content: `<h2>ูุชุงุจ ุงูุนูู ูุงูุฌูู</h2>
                        <p>ุจุงุจ ุงูุนูู ูุงูุฌูู</p>
                        <p>ุนู ุฃุจู ุนุจุฏ ุงููู ุนููู ุงูุณูุงู ูุงู: ุฅู ุงููู ุชุจุงุฑู ูุชุนุงูู ููุง ุฎูู ุงูุนูู ุงุณุชูุทูู ุซู ูุงู ูู: ุฃูุจู ูุฃูุจูุ ุซู ูุงู ูู: ุฃุฏุจุฑ ูุฃุฏุจุฑ.</p>
                        <p>ุซู ูุงู: ูุนุฒุชู ูุฌูุงูู ูุง ุฎููุช ุฎููุง ูู ุฃุญุจ ุฅูู ูููุ ููุง ุฃูููุชู ุฅูุง ูููู ุฃุญุจ.</p>`
                    },
                    {
                        number: 3,
                        content: `<h2>ูุถู ุงูุนูู</h2>
                        <p>ุนู ุฃุจู ุฌุนูุฑ ุนููู ุงูุณูุงู ูุงู: ูุงู ุฑุณูู ุงููู ุตูู ุงููู ุนููู ูุขูู: ูู ุณูู ุทุฑููุง ูุทูุจ ููู ุนููุง ุณูู ุงููู ุจู ุทุฑููุง ุฅูู ุงูุฌูุฉ.</p>
                        <p>ูุฅู ุงูููุงุฆูุฉ ูุชุถุน ุฃุฌูุญุชูุง ูุทุงูุจ ุงูุนูู ุฑุถุง ุจูุง ูุตูุน.</p>
                        <p>ูุฅู ุงูุนุงูู ููุณุชุบูุฑ ูู ูู ูู ุงูุณูุงูุงุช ููู ูู ุงูุฃุฑุถ ุญุชู ุงูุญูุชุงู ูู ุงูุจุญุฑ.</p>`
                    }
                ];

                for (const page of pages) {
                    await api.addPage(book.id, page.number, page.content);
                    addLog(`  โ ุชู ุฅุถุงูุฉ ุงูุตูุญุฉ ${page.number}`, 'success');
                }

                addLog('', 'info');
                addLog('โโโ ุชู ุฅุถุงูุฉ ุฌููุน ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุจูุฌุงุญ!', 'success');
                addLog('', 'info');
                addLog('๐ ุงูููุฎุต:', 'info');
                addLog(`  - ุงูุฃูุณุงู: 1`, 'info');
                addLog(`  - ุงููุชุจ: 1`, 'info');
                addLog(`  - ุงูุตูุญุงุช: ${pages.length}`, 'info');
                addLog('', 'info');
                addLog('ููููู ุงูุขู ุงูุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุฑุคูุฉ ุงูุจูุงูุงุช', 'success');

                btn.innerHTML = '<i class="fas fa-check"></i> ุชู ุงูุฅุถุงูุฉ ุจูุฌุงุญ!';
                btn.style.background = '#28a745';

            } catch (error) {
                addLog(`โ ุฎุทุฃ: ${error.message}`, 'error');
                console.error('ุชูุงุตูู ุงูุฎุทุฃ:', error);
                
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-plus"></i> ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ';
                btn.style.background = '#667eea';
            }
        }
    </script>
</body>
</html>
